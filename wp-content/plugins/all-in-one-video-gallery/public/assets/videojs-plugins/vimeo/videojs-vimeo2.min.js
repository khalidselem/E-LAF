/*! @name videojs-vimeo2 @version 1.3.0 @license Apache-2.0 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("video.js")):"function"==typeof define&&define.amd?define(["video.js"],t):(e=e||self).videojsVimeo2=t(e.videojs)}(this,function(e){"use strict";var t,i,o,s,r,a,n,u,l=(e=e&&e.hasOwnProperty("default")?e.default:e).browser.IS_NATIVE_ANDROID,c=e.getComponent("Tech"),d=function(t){var i,o;function s(e,i){var o;return(o=t.call(this,e,i)||this)._vimeoState={state:"unstarted",volume:1,muted:!!o.options_.muted,muteVolume:1,buffered:0,currentTime:0,duration:0,playbackRate:1},o.setPoster(e.poster),o.setSrc(o.options_.source),o.setTimeout(function(){this.el_&&(this.el_.parentNode.className+=" vjs-vimeo",l&&(this.el_.parentNode.className+=" vjs-vimeo-mobile"),s.isApiReady?this.initVimeoPlayer():s.apiReadyQueue.push(this))}.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(o))),o}o=t,(i=s).prototype=Object.create(o.prototype),i.prototype.constructor=i,i.__proto__=o;var r=s.prototype;return r.dispose=function(){if(this.vimeoPlayer)this.vimeoPlayer.unload(),this.vimeoPlayer.destroy();else{var e=s.apiReadyQueue.indexOf(this);-1!==e&&s.apiReadyQueue.splice(e,1)}this.vimeoPlayer=null,this.el_.parentNode.className=this.el_.parentNode.className.replace(" vjs-vimeo","").replace(" vjs-vimeo-mobile",""),this.el_.parentNode.removeChild(this.el_),t.prototype.dispose.call(this)},r.createEl=function(){var e=document.createElement("div");e.setAttribute("id",this.options_.techId),e.setAttribute("style","position:absolute;top:0;left:0;width:100%;height:100%"),e.setAttribute("class","vjs-tech");var t=document.createElement("div");if(t.appendChild(e),!l&&!this.options_.vimeoControls){var i=document.createElement("div");i.setAttribute("class","vjs-iframe-blocker"),i.setAttribute("style","position:absolute;top:0;left:0;width:100%;height:100%"),t.appendChild(i)}return t},r.initVimeoPlayer=function(){var e=this,t={url:this.options_.source.src,byline:!1,controls:!1,portrait:!1,title:!1};if(void 0!==this.options_.byline&&(t.byline=!!this.options_.byline),void 0!==this.options_.color&&(t.color=this.options_.color.replace(/^#/,"")),void 0!==this.options_.vimeoControls&&(t.controls=!!this.options_.vimeoControls),void 0!==this.options_.muted&&(t.muted=!!this.options_.muted),void 0!==this.options_.loop&&(t.loop=!!this.options_.loop),void 0!==this.options_.playsinline&&(t.playsinline=!!this.options_.playsinline),void 0!==this.options_.portrait&&(t.portrait=!!this.options_.portrait),void 0!==this.options_.title&&(t.title=!!this.options_.title),void 0!==this.options_.customVars){var i=this.options_.customVars;Object.keys(i).forEach(function(e){t[e]=i[e]})}this.activeVideoId=this.url?this.url.videoId:null,this.vimeoPlayer=new Vimeo.Player(this.options_.techId,t),this.trigger("loadstart"),this.vimeoPlayer.ready().then(function(){e.onPlayerReady();["play","playing","pause","ended","bufferstart","waiting","progress","timeupdate","seeking","seeked","durationchange","volumechange","playbackratechange","error"].forEach(function(t){e.vimeoPlayer.on(t,function(i){return e.onPlayerStateChange(t,i)})})})},r.onPlayerReady=function(){this.isReady_=!0,this.triggerReady(),this.trigger("loadedmetadata"),this.trigger("loadeddata"),this.trigger("canplay"),this.trigger("canplaythrough"),this.trigger("volumechange"),this.trigger("ratechange"),this.playOnReady&&this.play()},r.onPlayerStateChange=function(e,t){switch(this.lastState=e,e){case"play":this._vimeoState.state="play",this.trigger("play");break;case"playing":this._vimeoState.state="playing",this.trigger("playing");break;case"pause":this._vimeoState.state="paused",this.trigger("pause");break;case"ended":this._vimeoState.state="ended",this.trigger("ended");break;case"bufferstart":case"waiting":this._vimeoState.state="buffering",this.trigger("waiting");break;case"progress":this._vimeoState.buffered=t.percent,this.trigger("progress");break;case"timeupdate":this._vimeoState.currentTime=t.seconds,this.trigger("timeupdate");break;case"seeking":this.isSeeking=!0,this.trigger("seeking");break;case"seeked":this.isSeeking=!1,this.trigger("seeked");break;case"durationchange":this._vimeoState.duration=t.duration,this.trigger("durationchange");break;case"volumechange":this.trigger("volumechange");break;case"playbackratechange":this._vimeoState.playbackRate=t.playbackRate,this.trigger("ratechange");break;case"error":"PlayInterrupted"==t.name&&(this._vimeoState.state="paused",this.trigger("pause")),console.log(t)}},r.error=function(){return{code:null,message:null}},r.poster=function(){return l?null:this.poster_},r.setPoster=function(e){this.poster_=e},r.loadVideoById_=function(e){var t=this;this.vimeoPlayer&&this.vimeoPlayer.loadVideo(e).then(function(e){t.play()})},r.cueVideoById_=function(e){this.vimeoPlayer&&this.vimeoPlayer.loadVideo(e)},r.src=function(e){return e&&this.setSrc({src:e}),this.source},r.setSrc=function(e){e&&e.src&&(this.source=e,this.url=s.parseUrl(e.src),this.options_.autoplay&&!l?this.isReady_?this.play():(this.trigger("waiting"),this.playOnReady=!0):this.activeVideoId!==this.url.videoId&&(this.isReady_?(this.cueVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId):this.cueOnReady=!0))},r.autoplay=function(){return this.options_.autoplay},r.setAutoplay=function(e){this.options_.autoplay=e},r.loop=function(){return this.options_.loop},r.setLoop=function(e){this.options_.loop=e},r.play=function(){this.url&&this.url.videoId&&(this.isReady_?this.activeVideoId===this.url.videoId?this.vimeoPlayer.play().then(function(){}).catch(function(e){}):(this.loadVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId):(this.trigger("waiting"),this.playOnReady=!0))},r.pause=function(){this.vimeoPlayer&&this.vimeoPlayer.pause()},r.paused=function(){return"playing"!==this._vimeoState.state&&"buffering"!==this._vimeoState.state},r.currentTime=function(){return this._vimeoState.currentTime},r.setCurrentTime=function(e){var t=this;this.vimeoPlayer&&(this._vimeoState.currentTime=e,this.vimeoPlayer.setCurrentTime(e).then(function(){t._vimeoState.currentTime=e}))},r.seeking=function(){return this.isSeeking},r.seekable=function(){return e.createTimeRange(0,this._vimeoState.duration)},r.playbackRate=function(){return this._vimeoState.playbackRate},r.setPlaybackRate=function(e){var t=this;this.vimeoPlayer&&this.vimeoPlayer.setPlaybackRate(e).then(function(e){t._vimeoState.playbackRate=e})},r.duration=function(){return this._vimeoState.duration},r.currentSrc=function(){return this.source&&this.source.src},r.ended=function(){return!!this.vimeoPlayer&&"ended"===this._vimeoState.state},r.volume=function(){return this._vimeoState.muted?this._vimeoState.muteVolume:this._vimeoState.volume},r.setVolume=function(e){var t=this;this.vimeoPlayer&&("unstarted"==this._vimeoState.state&&this._vimeoState.muted||this.vimeoPlayer.setVolume(e).then(function(){t._vimeoState.volume=e}))},r.muted=function(){return!!this.vimeoPlayer&&this._vimeoState.muted},r.setMuted=function(e){this.vimeoPlayer&&(e?(this._vimeoState.muteVolume=this._vimeoState.volume,this.setVolume(0)):this.setVolume(this._vimeoState.muteVolume),this._vimeoState.muted=e)},r.buffered=function(){return e.createTimeRange(0,this._vimeoState.buffered*this._vimeoState.duration)},r.supportsFullScreen=function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled},r.preload=function(){},r.load=function(){},r.reset=function(){},r.networkState=function(){if(!this.vimeoPlayer)return 0;switch(this._vimeoState.state){case"unstarted":return 0;case"buffering":return 2;default:return 1}},r.readyState=function(){if(!this.vimeoPlayer)return 0;switch(this._vimeoState.state){case"unstarted":return 0;case"ready":return 1;case"buffering":return 2;default:return 4}},s}(c);return d.prototype.featuresTimeupdateEvents=!0,d.prototype.featuresPlaybackRate=!0,d.isSupported=function(){return!0},d.parseUrl=function(e){var t={videoId:null},i=e.match(/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/);return i&&(t.videoId=i[5]),t},c.withSourceHandlers(d),d.nativeSourceHandler={},d.nativeSourceHandler.canPlayType=function(e){return"video/vimeo"===e?"maybe":""},d.nativeSourceHandler.canHandleSource=function(e,t){if(e.type)return d.nativeSourceHandler.canPlayType(e.type);if(e.src){var i=/vimeo.com/.test(e.src)?"video/vimeo":"";return d.nativeSourceHandler.canPlayType(i)}return""},d.nativeSourceHandler.handleSource=function(e,t,i){t.setSrc(e.src)},d.nativeSourceHandler.dispose=function(){},d.registerSourceHandler(d.nativeSourceHandler),d.apiReadyQueue=[],"undefined"!=typeof document&&(s="https://player.vimeo.com/api/player.js",r=function(){d.isApiReady=!0;for(var e=0;e<d.apiReadyQueue.length;++e)d.apiReadyQueue[e].initVimeoPlayer()},a=!1,n=document.createElement("script"),(u=document.getElementsByTagName("script")[0]).parentNode.insertBefore(n,u),n.onload=function(){a||(a=!0,r())},n.onreadystatechange=function(){a||"complete"!==this.readyState&&"loaded"!==this.readyState||(a=!0,r())},n.src=s,t=".vjs-vimeo iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }.vjs-vimeo .vjs-iframe-blocker { display: none; }.vjs-vimeo.vjs-has-started .vjs-iframe-blocker { display: block; }.vjs-vimeo .vjs-poster { background-size: cover; }",i=document.head||document.getElementsByTagName("head")[0],(o=document.createElement("style")).type="text/css",o.styleSheet?o.styleSheet.cssText=t:o.appendChild(document.createTextNode(t)),i.appendChild(o)),d.VERSION="1.3.0",c.registerTech("Vimeo2",d),d});
